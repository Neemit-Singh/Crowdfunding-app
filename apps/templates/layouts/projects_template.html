{% extends 'layouts/base.html' %}

{% block title %} Projects {% endblock title %}


{% block stylesheets %}
<link rel="stylesheet" href="../../static/assets/css/projects-page.css">
{% endblock stylesheets %}

{% block content %}

<div class="py-5 mx-auto">
  <h3 class="mt-5 pt-4 text-center">
    {% block project_type %}{% endblock project_type %}
    {{ title }}
  </h3>
  <div class="d-flex justify-content-center flex-wrap">
    <!-- Project -->
    {%for project in projects%}
    <div class="category-page-container col-md-3 mx-3 mt-5">
      <div class="category-project-content p-4" style="border-radius: 10px; height:600px;">
        <a href="{% url 'show_project' project.id%}">
          <div style="height:300px">
            {% for image in images %}
            {% if image %}
            {% if image.project_id == project.id %}
            <img src="{{ image.images.url }}" alt="project-img" class="img-fluid rounded"
              style="height: inherit; width: 100%;">
            {% endif%}
            {% endif%}
            {% endfor %}
          </div>
        </a>
        <a href="{% url 'show_project' project.id%}" class="text-dark">
          <h3 class="my-3">{{ project.title|title }}</h3>
        </a>
        <div class="d-flex justify-content-between my-2">
          <span><small><i class="fa fa-calendar mr-1 text-muted"></i><span class="text-muted mx-1">Ends
                by:</span>{{ project.end_time }}</small></span>
        </div>
        <p class="text-secondary" style="height:80px; overflow-y: auto; word-wrap: break-word;">{{ project.details }}
        </p>
        {% for donation in donations %}
          {% if donation %}
            {% for donation_object in donation %}
              {% if donation_object %}
                {% if donation_object.project_id == project.id %}
                <h4 class="d-flex align-items-baseline mt-2">
                  {{ donation_object.donation }} L.E.
                  <span class="text-secondary text-sm mx-2">raised of {{ project.total_target }} L.E. goal</span>
                </h4>
              {% endif%}
              {% endif %}
            {% endfor %}
          {% endif %}
        {% endfor %}
        <div class="progress mb-3 h-auto">
          <div class="progress-bar bg-gradient-primary" role="progressbar" style="width: 50%" aria-valuenow="50"
            aria-valuemin="0" aria-valuemax="100"></div>
        </div>
        <a href="{%url 'show_project' project.id%}" class="btn btn-outline-secondary btn-sm">Read More</a>
      </div>
    </div>
    {%endfor%}
  </div>
</div>

{% endblock content %}